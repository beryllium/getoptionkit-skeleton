#!/usr/bin/env php
<?php

require_once __DIR__ . '/../bootstrap.php';

$options = new GetOptionKit\OptionCollection();
$options->add( 'h|help', 'Display usage instructions' ); // The '|' allows you to define a short and a long form: -h and --help, in this case
$options->add( 'g|greeting:', 'Greeting (default: "Hello")' ); // The ':' means "value required", so the user can't just specify "-g" on its own.

$parser = new GetOptionKit\OptionParser();
$result = $parser->parse( $argv );
$arguments = $result->getArguments();

if ($result->has( 'help' ) || count( $arguments ) != 1 )
{
  writeln( 'Usage: hello [-g "Greetings"] yourname' );
  writeln();

  $printer = new GetOptionKit\OptionPrinter\ConsoleOptionPrinter;
  echo $printer->render($options);
  writeln();
  exit(0);
}

//Set the default greeting
$greeting = 'Hello';

//Check for the optional override
if ( $result->has('greeting') )
{
  $greeting = $result['greeting']->value;
}

writeln( $greeting . ', ' . $arguments[0] . '!' );
